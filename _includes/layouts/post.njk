---
#layout: layouts/base.njk
templateClass: tmpl-post
---
{% extends "layouts/base.njk" %}

{% block coverImage %}
{% if coverImage %}
  {% set datePath = page.date | datePath %}
  {% set coverImagePath = "/img/assets/" + datePath + "/" + coverImage %}
  <div class="cover-image-header">
    <img src="{{ coverImagePath | addHash }}" alt="" class="cover-image">
    <div class="cover-image-overlay"></div>
  </div>
{% endif %}
{% endblock %}

{% block extraArticleHeader %}
   {% set wc = content | striptags | wordcount %}
   {% set wPerMinute = (wc / 240) + 1 %}
   <aside>
     ~{{ wPerMinute | round }} min read 
     <time datetime="{{ page.date | htmlDateString }}">{{ page.date | longPublishedDate }}</time>
   </aside>
{% endblock %}

{% set shareUrl = metadata.url + page.url %}

{% block article %}
{% if enclosure and enclosure.url %}
  <figure class="enclosure-player">
    {% if (enclosure.type or '') | slice(0, 6) == 'video/' %}
      <video controls preload="none" aria-label="Video player for {{ title }}">
        <source src="{{ enclosure.url }}" type="{{ enclosure.type }}">
        <p>Your browser does not support embedded video. <a href="{{ enclosure.url }}">Download the media file</a>.</p>
      </video>
    {% else %}
      <audio controls preload="none" aria-label="Audio player for {{ title }}">
        <source src="{{ enclosure.url }}" type="{{ enclosure.type }}">
        <p>Your browser does not support embedded audio. <a href="{{ enclosure.url }}">Download the audio file</a>.</p>
      </audio>
    {% endif %}
  </figure>
{% endif %}

{{ content | safe }}

<share-widget>
  <button on-click="share" aria-label="Share" href="{{ shareUrl | safe }}">
    <div></div>
  </button>
</share-widget>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "{{ title }}",
  "image": [],
  "author": "{{ metadata.author.name }}", 
  "genre": "{{ metadata.genre }}", 
  "publisher": {
    "@type": "Organization",
    "name": "{{ metadata.publisher.name }}",
    "logo": {
      "@type": "ImageObject",
      "url": "{{ '/img/favicon/favicon-192x192.png' | addHash }}"
    }
  },
  "url": "{{ metadata.url }}{{ canonicalUrl or page.url }}",
  "mainEntityOfPage": "{{ metadata.url }}{{ canonicalUrl or page.url }}",
  "datePublished": "{{ page.date | htmlDateString }}",
  "dateModified": "{{ page.inputPath | lastModifiedDate  | htmlDateString }}",
  "description": "{{ content | striptags | truncate(140) }}"
}
</script>

{% endblock %}
